/**
* CMU MSUAV Project (Micro and Small Unmanned Aerial Vehicle)
*          
* \file  playback.cxx
* \brief load logged image and IMU data in a timely manner
* \date  01-Nov-2009
*
* \author Myung Hwangbo Myung Hwangbo (myung@cs.cmu.edu)
*
* Copyright (c) 2009 Myung Hwangbo
* Robotics Institute, Carnegie Mellon University
*
*/
#include "opencv2/highgui/highgui.hpp"
#include <iostream>
#include <ctype.h>
#include <ipp.h>
#include <highgui.h>
#include <iostream>
#include <fstream>
#include <string>
#include <vector>
#include "playback_tracker.h"

using namespace cv;
using namespace std;

string desk[]={"desk_00001891_00069317.jpg",
"desk_00001892_00069350.jpg",
"desk_00001893_00069384.jpg",
"desk_00001894_00069417.jpg",
"desk_00001895_00069452.jpg",
"desk_00001896_00069484.jpg",
"desk_00001897_00069517.jpg",
"desk_00001898_00069551.jpg",
"desk_00001899_00069584.jpg",
"desk_00001900_00069618.jpg",
"desk_00001901_00069651.jpg",
"desk_00001902_00069685.jpg",
"desk_00001903_00069718.jpg",
"desk_00001904_00069751.jpg",
"desk_00001905_00069784.jpg",
"desk_00001906_00069818.jpg",
"desk_00001907_00069851.jpg",
"desk_00001908_00069884.jpg",
"desk_00001909_00069918.jpg",
"desk_00001910_00069952.jpg",
"desk_00001911_00069985.jpg",
"desk_00001912_00070018.jpg",
"desk_00001913_00070051.jpg",
"desk_00001914_00070084.jpg",
"desk_00001915_00070118.jpg",
"desk_00001916_00070152.jpg",
"desk_00001917_00070186.jpg",
"desk_00001918_00070218.jpg",
"desk_00001919_00070251.jpg",
"desk_00001920_00070285.jpg",
"desk_00001921_00070318.jpg",
"desk_00001922_00070351.jpg",
"desk_00001923_00070385.jpg",
"desk_00001924_00070419.jpg",
"desk_00001925_00070452.jpg",
"desk_00001926_00070485.jpg",
"desk_00001927_00070518.jpg",
"desk_00001928_00070552.jpg",
"desk_00001929_00070585.jpg",
"desk_00001930_00070619.jpg",
"desk_00001931_00070652.jpg",
"desk_00001932_00070686.jpg",
"desk_00001933_00070719.jpg",
"desk_00001934_00070752.jpg",
"desk_00001935_00070785.jpg",
"desk_00001936_00070819.jpg",
"desk_00001937_00070852.jpg",
"desk_00001938_00070886.jpg",
"desk_00001939_00070920.jpg",
"desk_00001940_00070953.jpg",
"desk_00001941_00070985.jpg",
"desk_00001942_00071019.jpg",
"desk_00001943_00071052.jpg",
"desk_00001944_00071085.jpg",
"desk_00001945_00071119.jpg",
"desk_00001946_00071153.jpg",
"desk_00001947_00071187.jpg",
"desk_00001948_00071219.jpg",
"desk_00001949_00071252.jpg",
"desk_00001950_00071286.jpg",
"desk_00001951_00071319.jpg",
"desk_00001952_00071353.jpg",
"desk_00001953_00071386.jpg",
"desk_00001954_00071420.jpg",
"desk_00001955_00071453.jpg",
"desk_00001956_00071486.jpg",
"desk_00001957_00071519.jpg",
"desk_00001958_00071553.jpg",
"desk_00001959_00071587.jpg",
"desk_00001960_00071620.jpg",
"desk_00001961_00071653.jpg",
"desk_00001962_00071687.jpg",
"desk_00001963_00071719.jpg",
"desk_00001964_00071753.jpg",
"desk_00001965_00071786.jpg",
"desk_00001966_00071820.jpg",
"desk_00001967_00071853.jpg",
"desk_00001968_00071887.jpg",
"desk_00001969_00071921.jpg",
"desk_00001970_00071953.jpg",
"desk_00001971_00071986.jpg",
"desk_00001972_00072020.jpg",
"desk_00001973_00072053.jpg",
"desk_00001974_00072087.jpg",
"desk_00001975_00072120.jpg",
"desk_00001976_00072155.jpg",
"desk_00001977_00072187.jpg",
"desk_00001978_00072220.jpg",
"desk_00001979_00072253.jpg",
"desk_00001980_00072287.jpg",
"desk_00001981_00072320.jpg",
"desk_00001982_00072354.jpg",
"desk_00001983_00072387.jpg",
"desk_00001984_00072421.jpg",
"desk_00001985_00072454.jpg",
"desk_00001986_00072487.jpg",
"desk_00001987_00072520.jpg",
"desk_00001988_00072554.jpg",
"desk_00001989_00072587.jpg",
"desk_00001990_00072621.jpg",
"desk_00001991_00072655.jpg",
"desk_00001992_00072688.jpg",
"desk_00001993_00072720.jpg",
"desk_00001994_00072754.jpg",
"desk_00001995_00072787.jpg",
"desk_00001996_00072821.jpg",
"desk_00001997_00072854.jpg",
"desk_00001998_00072888.jpg",
"desk_00001999_00072921.jpg",
"desk_00002000_00072954.jpg",
"desk_00002001_00072987.jpg",
"desk_00002002_00073021.jpg",
"desk_00002003_00073054.jpg",
"desk_00002004_00073088.jpg",
"desk_00002005_00073121.jpg",
"desk_00002006_00073155.jpg",
"desk_00002007_00073188.jpg",
"desk_00002008_00073221.jpg",
"desk_00002009_00073254.jpg",
"desk_00002010_00073288.jpg",
"desk_00002011_00073322.jpg",
"desk_00002012_00073355.jpg",
"desk_00002013_00073389.jpg",
"desk_00002014_00073422.jpg",
"desk_00002015_00073454.jpg",
"desk_00002016_00073488.jpg",
"desk_00002017_00073521.jpg",
"desk_00002018_00073555.jpg",
"desk_00002019_00073588.jpg",
"desk_00002020_00073622.jpg",
"desk_00002021_00073655.jpg",
"desk_00002022_00073688.jpg",
"desk_00002023_00073721.jpg",
"desk_00002024_00073755.jpg",
"desk_00002025_00073788.jpg",
"desk_00002026_00073822.jpg",
"desk_00002027_00073855.jpg",
"desk_00002028_00073889.jpg",
"desk_00002029_00073922.jpg",
"desk_00002030_00073955.jpg",
"desk_00002031_00073988.jpg",
"desk_00002032_00074022.jpg",
"desk_00002033_00074056.jpg",
"desk_00002034_00074089.jpg",
"desk_00002035_00074123.jpg",
"desk_00002036_00074156.jpg",
"desk_00002037_00074189.jpg",
"desk_00002038_00074222.jpg",
"desk_00002039_00074255.jpg",
"desk_00002040_00074289.jpg",
"desk_00002041_00074322.jpg",
"desk_00002042_00074356.jpg",
"desk_00002043_00074389.jpg",
"desk_00002044_00074422.jpg",
"desk_00002045_00074455.jpg",
"desk_00002046_00074489.jpg",
"desk_00002047_00074522.jpg",
"desk_00002048_00074556.jpg",
"desk_00002049_00074589.jpg",
"desk_00002050_00074623.jpg",
"desk_00002051_00074656.jpg",
"desk_00002052_00074689.jpg",
"desk_00002053_00074722.jpg",
"desk_00002054_00074756.jpg",
"desk_00002055_00074790.jpg",
"desk_00002056_00074823.jpg",
"desk_00002057_00074857.jpg",
"desk_00002058_00074890.jpg",
"desk_00002059_00074923.jpg",
"desk_00002060_00074956.jpg",
"desk_00002061_00074989.jpg",
"desk_00002062_00075023.jpg",
"desk_00002063_00075056.jpg",
"desk_00002064_00075090.jpg",
"desk_00002065_00075123.jpg",
"desk_00002066_00075157.jpg",
"desk_00002067_00075190.jpg",
"desk_00002068_00075223.jpg",
"desk_00002069_00075256.jpg",
"desk_00002070_00075290.jpg",
"desk_00002071_00075323.jpg",
"desk_00002072_00075357.jpg",
"desk_00002073_00075390.jpg",
"desk_00002074_00075423.jpg",
"desk_00002075_00075456.jpg",
"desk_00002076_00075490.jpg",
"desk_00002077_00075523.jpg",
"desk_00002078_00075557.jpg",
"desk_00002079_00075591.jpg",
"desk_00002080_00075624.jpg",
"desk_00002081_00075657.jpg",
"desk_00002082_00075690.jpg",
"desk_00002083_00075723.jpg",
"desk_00002084_00075757.jpg",
"desk_00002085_00075791.jpg",
"desk_00002086_00075824.jpg",
"desk_00002087_00075858.jpg",
"desk_00002088_00075891.jpg",
"desk_00002089_00075924.jpg",
"desk_00002090_00075957.jpg",
"desk_00002091_00075990.jpg",
"desk_00002092_00076024.jpg",
"desk_00002093_00076057.jpg",
"desk_00002094_00076092.jpg",
"desk_00002095_00076124.jpg",
"desk_00002096_00076157.jpg",
"desk_00002097_00076191.jpg",
"desk_00002098_00076224.jpg",
"desk_00002099_00076257.jpg",
"desk_00002100_00076291.jpg",
"desk_00002101_00076324.jpg",
"desk_00002102_00076358.jpg",
"desk_00002103_00076391.jpg",
"desk_00002104_00076424.jpg",
"desk_00002105_00076457.jpg",
"desk_00002106_00076491.jpg",
"desk_00002107_00076525.jpg",
"desk_00002108_00076558.jpg",
"desk_00002109_00076592.jpg",
"desk_00002110_00076625.jpg",
"desk_00002111_00076658.jpg",
"desk_00002112_00076691.jpg",
"desk_00002113_00076724.jpg",
"desk_00002114_00076758.jpg",
"desk_00002115_00076791.jpg",
"desk_00002116_00076825.jpg",
"desk_00002117_00076859.jpg",
"desk_00002118_00076891.jpg",
"desk_00002119_00076924.jpg",
"desk_00002120_00076958.jpg",
"desk_00002121_00076991.jpg",
"desk_00002122_00077025.jpg",
"desk_00002123_00077059.jpg",
"desk_00002124_00077092.jpg",
"desk_00002125_00077125.jpg",
"desk_00002126_00077158.jpg",
"desk_00002127_00077191.jpg",
"desk_00002128_00077225.jpg",
"desk_00002129_00077259.jpg",
"desk_00002130_00077292.jpg",
"desk_00002131_00077326.jpg",
"desk_00002132_00077359.jpg",
"desk_00002133_00077392.jpg",
"desk_00002134_00077425.jpg",
"desk_00002135_00077458.jpg",
"desk_00002136_00077492.jpg",
"desk_00002137_00077526.jpg",
"desk_00002138_00077559.jpg",
"desk_00002139_00077593.jpg",
"desk_00002140_00077625.jpg",
"desk_00002141_00077659.jpg",
"desk_00002142_00077692.jpg",
"desk_00002143_00077725.jpg",
"desk_00002144_00077759.jpg",
"desk_00002145_00077793.jpg",
"desk_00002146_00077826.jpg",
"desk_00002147_00077859.jpg",
"desk_00002148_00077892.jpg",
"desk_00002149_00077925.jpg",
"desk_00002150_00077959.jpg",
"desk_00002151_00077992.jpg",
"desk_00002152_00078026.jpg",
"desk_00002153_00078060.jpg",
"desk_00002154_00078093.jpg",
"desk_00002155_00078126.jpg",
"desk_00002156_00078159.jpg",
"desk_00002157_00078193.jpg",
"desk_00002158_00078226.jpg",
"desk_00002159_00078260.jpg",
"desk_00002160_00078293.jpg",
"desk_00002161_00078327.jpg",
"desk_00002162_00078360.jpg",
"desk_00002163_00078393.jpg",
"desk_00002164_00078426.jpg",
"desk_00002165_00078459.jpg",
"desk_00002166_00078494.jpg",
"desk_00002167_00078526.jpg",
"desk_00002168_00078561.jpg",
"desk_00002169_00078593.jpg",
"desk_00002170_00078626.jpg",
"desk_00002171_00078660.jpg",
"desk_00002172_00078693.jpg",
"desk_00002173_00078726.jpg",
"desk_00002174_00078760.jpg",
"desk_00002175_00078794.jpg",
"desk_00002176_00078827.jpg",
"desk_00002177_00078860.jpg",
"desk_00002178_00078893.jpg",
"desk_00002179_00078926.jpg",
"desk_00002180_00078960.jpg",
"desk_00002181_00078994.jpg",
"desk_00002182_00079027.jpg",
"desk_00002183_00079061.jpg",
"desk_00002184_00079094.jpg",
"desk_00002185_00079127.jpg",
"desk_00002186_00079160.jpg",
"desk_00002187_00079193.jpg",
"desk_00002188_00079228.jpg",
"desk_00002189_00079261.jpg",
"desk_00002190_00079295.jpg",
"desk_00002191_00079328.jpg",
"desk_00002192_00079360.jpg",
"desk_00002193_00079394.jpg",
"desk_00002194_00079427.jpg",
"desk_00002195_00079460.jpg",
"desk_00002196_00079494.jpg",
"desk_00002197_00079528.jpg",
"desk_00002198_00079561.jpg",
"desk_00002199_00079594.jpg",
"desk_00002200_00079627.jpg",
"desk_00002201_00079661.jpg",
"desk_00002202_00079694.jpg",
"desk_00002203_00079728.jpg",
"desk_00002204_00079761.jpg",
"desk_00002205_00079795.jpg",
"desk_00002206_00079828.jpg",
"desk_00002207_00079861.jpg",
"desk_00002208_00079894.jpg",
"desk_00002209_00079927.jpg",
"desk_00002210_00079961.jpg",
"desk_00002211_00079995.jpg",
"desk_00002212_00080029.jpg",
"desk_00002213_00080062.jpg",
"desk_00002214_00080094.jpg",
"desk_00002215_00080128.jpg",
"desk_00002216_00080161.jpg",
"desk_00002217_00080194.jpg",
"desk_00002218_00080228.jpg",
"desk_00002219_00080262.jpg",
"desk_00002220_00080296.jpg",
"desk_00002221_00080328.jpg",
"desk_00002222_00080361.jpg",
"desk_00002223_00080395.jpg",
"desk_00002224_00080428.jpg",
"desk_00002225_00080462.jpg",
"desk_00002226_00080495.jpg",
"desk_00002227_00080529.jpg",
"desk_00002228_00080562.jpg",
"desk_00002229_00080595.jpg",
"desk_00002230_00080628.jpg",
"desk_00002231_00080662.jpg",
"desk_00002232_00080695.jpg",
"desk_00002233_00080729.jpg",
"desk_00002234_00080762.jpg",
"desk_00002235_00080796.jpg",
"desk_00002236_00080828.jpg",
"desk_00002237_00080862.jpg",
"desk_00002238_00080895.jpg",
"desk_00002239_00080928.jpg",
"desk_00002240_00080962.jpg",
"desk_00002241_00080996.jpg",
"desk_00002242_00081030.jpg",
"desk_00002243_00081063.jpg",
"desk_00002244_00081095.jpg",
"desk_00002245_00081129.jpg",
"desk_00002246_00081162.jpg",
"desk_00002247_00081196.jpg",
"desk_00002248_00081229.jpg",
"desk_00002249_00081264.jpg",
"desk_00002250_00081296.jpg",
"desk_00002251_00081329.jpg",
"desk_00002252_00081362.jpg",
"desk_00002253_00081396.jpg",
"desk_00002254_00081429.jpg",
"desk_00002255_00081463.jpg",
"desk_00002256_00081496.jpg",
"desk_00002257_00081530.jpg",
"desk_00002258_00081563.jpg",
"desk_00002259_00081596.jpg",
"desk_00002260_00081629.jpg",
"desk_00002261_00081663.jpg",
"desk_00002262_00081696.jpg",
"desk_00002263_00081730.jpg",
"desk_00002264_00081764.jpg",
"desk_00002265_00081796.jpg",
"desk_00002266_00081829.jpg",
"desk_00002267_00081863.jpg",
"desk_00002268_00081896.jpg",
"desk_00002269_00081929.jpg",
"desk_00002270_00081963.jpg",
"desk_00002271_00081997.jpg",
"desk_00002272_00082030.jpg",
"desk_00002273_00082063.jpg",
"desk_00002274_00082096.jpg",
"desk_00002275_00082130.jpg",
"desk_00002276_00082163.jpg",
"desk_00002277_00082197.jpg",
"desk_00002278_00082230.jpg",
"desk_00002279_00082264.jpg",
"desk_00002280_00082297.jpg",
"desk_00002281_00082330.jpg",
"desk_00002282_00082363.jpg",
"desk_00002283_00082397.jpg",
"desk_00002284_00082431.jpg",
"desk_00002285_00082464.jpg",
"desk_00002286_00082498.jpg",
"desk_00002287_00082530.jpg",
"desk_00002288_00082563.jpg",
"desk_00002289_00082597.jpg",
"desk_00002290_00082630.jpg",
"desk_00002291_00082664.jpg",
"desk_00002292_00082697.jpg",
"desk_00002293_00082731.jpg",
"desk_00002294_00082764.jpg",
"desk_00002295_00082797.jpg",
"desk_00002296_00082830.jpg",
"desk_00002297_00082864.jpg",
"desk_00002298_00082897.jpg",
"desk_00002299_00082931.jpg",
"desk_00002300_00082964.jpg",
"desk_00002301_00082998.jpg",
"desk_00002302_00083031.jpg",
"desk_00002303_00083064.jpg",
"desk_00002304_00083097.jpg",
"desk_00002305_00083131.jpg",
"desk_00002306_00083164.jpg",
"desk_00002307_00083198.jpg",
"desk_00002308_00083232.jpg",
"desk_00002309_00083265.jpg",
"desk_00002310_00083298.jpg",
"desk_00002311_00083331.jpg",
"desk_00002312_00083364.jpg",
"desk_00002313_00083398.jpg",
"desk_00002314_00083431.jpg",
"desk_00002315_00083465.jpg",
"desk_00002316_00083498.jpg",
"desk_00002317_00083531.jpg",
"desk_00002318_00083564.jpg",
"desk_00002319_00083598.jpg",
"desk_00002320_00083631.jpg",
"desk_00002321_00083665.jpg",
"desk_00002322_00083698.jpg",
"desk_00002323_00083732.jpg",
"desk_00002324_00083765.jpg",
"desk_00002325_00083798.jpg",
"desk_00002326_00083831.jpg",
"desk_00002327_00083865.jpg",
"desk_00002328_00083899.jpg",
"desk_00002329_00083932.jpg",
"desk_00002330_00083966.jpg",
"desk_00002331_00083999.jpg",
"desk_00002332_00084032.jpg",
"desk_00002333_00084065.jpg",
"desk_00002334_00084098.jpg",
"desk_00002335_00084132.jpg",
"desk_00002336_00084166.jpg",
"desk_00002337_00084199.jpg",
"desk_00002338_00084233.jpg",
"desk_00002339_00084266.jpg",
"desk_00002340_00084299.jpg",
"desk_00002341_00084332.jpg",
"desk_00002342_00084365.jpg",
"desk_00002343_00084399.jpg",
"desk_00002344_00084432.jpg",
"desk_00002345_00084467.jpg",
"desk_00002346_00084499.jpg",
"desk_00002347_00084532.jpg",
"desk_00002348_00084565.jpg",
"desk_00002349_00084599.jpg",
"desk_00002350_00084632.jpg",
"desk_00002351_00084666.jpg",
"desk_00002352_00084700.jpg",
"desk_00002353_00084733.jpg",
"desk_00002354_00084766.jpg",
"desk_00002355_00084799.jpg",
"desk_00002356_00084832.jpg",
"desk_00002357_00084866.jpg",
"desk_00002358_00084900.jpg",
"desk_00002359_00084933.jpg",
"desk_00002360_00084967.jpg",
"desk_00002361_00085000.jpg",
"desk_00002362_00085033.jpg",
"desk_00002363_00085066.jpg",
"desk_00002364_00085099.jpg",
"desk_00002365_00085133.jpg",
"desk_00002366_00085166.jpg",
"desk_00002367_00085200.jpg",
"desk_00002368_00085234.jpg",
"desk_00002369_00085266.jpg",
"desk_00002370_00085300.jpg",
"desk_00002371_00085333.jpg",
"desk_00002372_00085366.jpg",
"desk_00002373_00085400.jpg",
"desk_00002374_00085434.jpg",
"desk_00002375_00085467.jpg",
"desk_00002376_00085500.jpg",
"desk_00002377_00085533.jpg",
"desk_00002378_00085566.jpg",
"desk_00002379_00085600.jpg",
"desk_00002380_00085634.jpg",
"desk_00002381_00085667.jpg",
"desk_00002382_00085701.jpg",
"desk_00002383_00085734.jpg",
"desk_00002384_00085767.jpg",
"desk_00002385_00085800.jpg",
"desk_00002386_00085833.jpg",
"desk_00002387_00085868.jpg",
"desk_00002388_00085900.jpg",
"desk_00002389_00085934.jpg",
"desk_00002390_00085967.jpg",
"desk_00002391_00086000.jpg",
"desk_00002392_00086034.jpg",
"desk_00002393_00086067.jpg",
"desk_00002394_00086100.jpg",
"desk_00002395_00086134.jpg",
"desk_00002396_00086167.jpg",
"desk_00002397_00086201.jpg",
"desk_00002398_00086234.jpg",
"desk_00002399_00086267.jpg",
"desk_00002400_00086300.jpg",
"desk_00002401_00086334.jpg",
"desk_00002402_00086368.jpg",
"desk_00002403_00086401.jpg",
"desk_00002404_00086435.jpg",
"desk_00002405_00086468.jpg",
"desk_00002406_00086501.jpg",
"desk_00002407_00086534.jpg",
"desk_00002408_00086567.jpg",
"desk_00002409_00086601.jpg",
"desk_00002410_00086634.jpg",
"desk_00002411_00086668.jpg",
"desk_00002412_00086702.jpg",
"desk_00002413_00086735.jpg",
"desk_00002414_00086768.jpg",
"desk_00002415_00086801.jpg",
"desk_00002416_00086834.jpg",
"desk_00002417_00086868.jpg",
"desk_00002418_00086901.jpg",
"desk_00002419_00086936.jpg",
"desk_00002420_00086968.jpg",
"desk_00002421_00087001.jpg",
"desk_00002422_00087034.jpg",
"desk_00002423_00087068.jpg",
"desk_00002424_00087101.jpg",
"desk_00002425_00087135.jpg",
"desk_00002426_00087169.jpg",
"desk_00002427_00087202.jpg",
"desk_00002428_00087235.jpg",
"desk_00002429_00087268.jpg",
"desk_00002430_00087301.jpg",
"desk_00002431_00087335.jpg",
"desk_00002432_00087369.jpg",
"desk_00002433_00087402.jpg",
"desk_00002434_00087436.jpg",
"desk_00002435_00087469.jpg",
"desk_00002436_00087502.jpg",
"desk_00002437_00087535.jpg",
"desk_00002438_00087568.jpg",
"desk_00002439_00087602.jpg",
"desk_00002440_00087636.jpg",
"desk_00002441_00087670.jpg",
"desk_00002442_00087702.jpg",
"desk_00002443_00087735.jpg",
"desk_00002444_00087769.jpg",
"desk_00002445_00087802.jpg",
"desk_00002446_00087835.jpg",
"desk_00002447_00087869.jpg",
"desk_00002448_00087903.jpg",
"desk_00002449_00087936.jpg",
"desk_00002450_00087969.jpg",
"desk_00002451_00088002.jpg",
"desk_00002452_00088035.jpg",
"desk_00002453_00088069.jpg",
"desk_00002454_00088103.jpg",
"desk_00002455_00088136.jpg",
"desk_00002456_00088170.jpg",
"desk_00002457_00088203.jpg",
"desk_00002458_00088236.jpg",
"desk_00002459_00088269.jpg",
"desk_00002460_00088302.jpg",
"desk_00002461_00088336.jpg",
"desk_00002462_00088370.jpg",
"desk_00002463_00088404.jpg",
"desk_00002464_00088437.jpg",
"desk_00002465_00088469.jpg",
"desk_00002466_00088503.jpg",
"desk_00002467_00088536.jpg",
"desk_00002468_00088569.jpg",
"desk_00002469_00088603.jpg",
"desk_00002470_00088637.jpg",
"desk_00002471_00088671.jpg",
"desk_00002472_00088703.jpg",
"desk_00002473_00088736.jpg",
"desk_00002474_00088770.jpg",
"desk_00002475_00088803.jpg",
"desk_00002476_00088837.jpg",
"desk_00002477_00088870.jpg",
"desk_00002478_00088905.jpg",
"desk_00002479_00088937.jpg",
"desk_00002480_00088970.jpg",
"desk_00002481_00089003.jpg",
"desk_00002482_00089036.jpg",
"desk_00002483_00089070.jpg",
"desk_00002484_00089104.jpg",
"desk_00002485_00089137.jpg",
"desk_00002486_00089171.jpg",
"desk_00002487_00089203.jpg",
"desk_00002488_00089237.jpg",
"desk_00002489_00089270.jpg",
"desk_00002490_00089303.jpg",
"desk_00002491_00089337.jpg",
"desk_00002492_00089371.jpg",
"desk_00002493_00089405.jpg",
"desk_00002494_00089437.jpg",
"desk_00002495_00089470.jpg",
"desk_00002496_00089504.jpg",
"desk_00002497_00089537.jpg",
"desk_00002498_00089571.jpg",
"desk_00002499_00089604.jpg",
"desk_00002500_00089638.jpg",
"desk_00002501_00089671.jpg",
"desk_00002502_00089704.jpg",
"desk_00002503_00089737.jpg",
"desk_00002504_00089771.jpg",
"desk_00002505_00089804.jpg",
"desk_00002506_00089838.jpg",
"desk_00002507_00089871.jpg",
"desk_00002508_00089905.jpg",
"desk_00002509_00089938.jpg",
"desk_00002510_00089971.jpg",
"desk_00002511_00090004.jpg",
"desk_00002512_00090037.jpg",
"desk_00002513_00090071.jpg",
"desk_00002514_00090105.jpg",
"desk_00002515_00090139.jpg",
"desk_00002516_00090171.jpg",
"desk_00002517_00090204.jpg",
"desk_00002518_00090238.jpg",
"desk_00002519_00090271.jpg",
"desk_00002520_00090305.jpg",
"desk_00002521_00090338.jpg",
"desk_00002522_00090372.jpg",
"desk_00002523_00090405.jpg",
"desk_00002524_00090438.jpg",
"desk_00002525_00090471.jpg",
"desk_00002526_00090505.jpg",
"desk_00002527_00090538.jpg",
"desk_00002528_00090572.jpg",
"desk_00002529_00090605.jpg",
"desk_00002530_00090639.jpg",
"desk_00002531_00090672.jpg",
"desk_00002532_00090705.jpg",
"desk_00002533_00090738.jpg",
"desk_00002534_00090772.jpg",
"desk_00002535_00090806.jpg",
"desk_00002536_00090839.jpg",
"desk_00002537_00090873.jpg",
"desk_00002538_00090906.jpg",
"desk_00002539_00090938.jpg",
"desk_00002540_00090972.jpg",
"desk_00002541_00091005.jpg",
"desk_00002542_00091038.jpg",
"desk_00002543_00091072.jpg",
"desk_00002544_00091106.jpg",
"desk_00002545_00091140.jpg",
"desk_00002546_00091172.jpg",
"desk_00002547_00091205.jpg",
"desk_00002548_00091239.jpg",
"desk_00002549_00091272.jpg",
"desk_00002550_00091306.jpg",
"desk_00002551_00091339.jpg",
"desk_00002552_00091373.jpg",
"desk_00002553_00091406.jpg",
"desk_00002554_00091439.jpg",
"desk_00002555_00091472.jpg",
"desk_00002556_00091506.jpg",
"desk_00002557_00091540.jpg",
"desk_00002558_00091573.jpg",
"desk_00002559_00091607.jpg",
"desk_00002560_00091640.jpg",
"desk_00002561_00091673.jpg",
"desk_00002562_00091706.jpg",
"desk_00002563_00091739.jpg",
"desk_00002564_00091773.jpg",
"desk_00002565_00091806.jpg",
"desk_00002566_00091840.jpg",
"desk_00002567_00091873.jpg",
"desk_00002568_00091907.jpg",
"desk_00002569_00091939.jpg",
"desk_00002570_00091973.jpg",
"desk_00002571_00092006.jpg",
"desk_00002572_00092040.jpg",
"desk_00002573_00092073.jpg",
"desk_00002574_00092107.jpg",
"desk_00002575_00092140.jpg",
"desk_00002576_00092173.jpg",
"desk_00002577_00092206.jpg",
"desk_00002578_00092240.jpg",
"desk_00002579_00092274.jpg",
"desk_00002580_00092307.jpg",
"desk_00002581_00092341.jpg",
"desk_00002582_00092374.jpg",
"desk_00002583_00092407.jpg",
"desk_00002584_00092440.jpg",
"desk_00002585_00092473.jpg",
"desk_00002586_00092507.jpg",
"desk_00002587_00092540.jpg",
"desk_00002588_00092574.jpg",
"desk_00002589_00092607.jpg",
"desk_00002590_00092640.jpg",
"desk_00002591_00092673.jpg",
"desk_00002592_00092707.jpg",
"desk_00002593_00092740.jpg",
"desk_00002594_00092774.jpg",
"desk_00002595_00092807.jpg",
"desk_00002596_00092842.jpg",
"desk_00002597_00092874.jpg",
"desk_00002598_00092907.jpg",
"desk_00002599_00092940.jpg",
"desk_00002600_00092974.jpg",
"desk_00002601_00093007.jpg",
"desk_00002602_00093041.jpg",
"desk_00002603_00093075.jpg",
"desk_00002604_00093108.jpg",
"desk_00002605_00093141.jpg",
"desk_00002606_00093174.jpg",
"desk_00002607_00093207.jpg",
"desk_00002608_00093241.jpg",
"desk_00002609_00093274.jpg",
"desk_00002610_00093308.jpg",
"desk_00002611_00093342.jpg",
"desk_00002612_00093375.jpg",
"desk_00002613_00093408.jpg",
"desk_00002614_00093441.jpg",
"desk_00002615_00093474.jpg",
"desk_00002616_00093508.jpg",
"desk_00002617_00093542.jpg",
"desk_00002618_00093576.jpg",
"desk_00002619_00093608.jpg",
"desk_00002620_00093641.jpg",
"desk_00002621_00093674.jpg",
"desk_00002622_00093708.jpg",
"desk_00002623_00093741.jpg",
"desk_00002624_00093775.jpg",
"desk_00002625_00093808.jpg",
"desk_00002626_00093842.jpg",
"desk_00002627_00093875.jpg",
"desk_00002628_00093908.jpg",
"desk_00002629_00093941.jpg",
"desk_00002630_00093975.jpg",
"desk_00002631_00094009.jpg",
"desk_00002632_00094042.jpg",
"desk_00002633_00094076.jpg",
"desk_00002634_00094109.jpg",
"desk_00002635_00094142.jpg",
"desk_00002636_00094175.jpg",
"desk_00002637_00094208.jpg",
"desk_00002638_00094242.jpg",
"desk_00002639_00094276.jpg",
"desk_00002640_00094309.jpg",
"desk_00002641_00094343.jpg",
"desk_00002642_00094375.jpg",
"desk_00002643_00094409.jpg",
"desk_00002644_00094442.jpg",
"desk_00002645_00094475.jpg",
"desk_00002646_00094509.jpg",
"desk_00002647_00094542.jpg",
"desk_00002648_00094576.jpg",
"desk_00002649_00094609.jpg",
"desk_00002650_00094642.jpg",
"desk_00002651_00094675.jpg",
"desk_00002652_00094709.jpg",
"desk_00002653_00094743.jpg",
"desk_00002654_00094776.jpg",
"desk_00002655_00094811.jpg",
"desk_00002656_00094843.jpg",
"desk_00002657_00094876.jpg",
"desk_00002658_00094909.jpg",
"desk_00002659_00094942.jpg",
"desk_00002660_00094976.jpg",
"desk_00002661_00095009.jpg",
"desk_00002662_00095043.jpg",
"desk_00002663_00095077.jpg",
"desk_00002664_00095109.jpg",
"desk_00002665_00095143.jpg",
"desk_00002666_00095176.jpg",
"desk_00002667_00095209.jpg",
"desk_00002668_00095243.jpg",
"desk_00002669_00095276.jpg",
"desk_00002670_00095311.jpg",
"desk_00002671_00095343.jpg",
"desk_00002672_00095376.jpg",
"desk_00002673_00095409.jpg",
"desk_00002674_00095443.jpg",
"desk_00002675_00095477.jpg",
"desk_00002676_00095510.jpg",
"desk_00002677_00095544.jpg",
"desk_00002678_00095577.jpg",
"desk_00002679_00095610.jpg",
"desk_00002680_00095643.jpg",
"desk_00002681_00095676.jpg",
"desk_00002682_00095710.jpg",
"desk_00002683_00095744.jpg",
"desk_00002684_00095777.jpg",
"desk_00002685_00095811.jpg",
"desk_00002686_00095844.jpg",
"desk_00002687_00095877.jpg",
"desk_00002688_00095910.jpg",
"desk_00002689_00095943.jpg",
"desk_00002690_00095977.jpg",
"desk_00002691_00096010.jpg",
"desk_00002692_00096045.jpg",
"desk_00002693_00096077.jpg",
"desk_00002694_00096110.jpg",
"desk_00002695_00096143.jpg",
"desk_00002696_00096177.jpg",
"desk_00002697_00096210.jpg",
"desk_00002698_00096244.jpg",
"desk_00002699_00096278.jpg",
"desk_00002700_00096311.jpg",
"desk_00002701_00096344.jpg",
"desk_00002702_00096377.jpg",
"desk_00002703_00096410.jpg",
"desk_00002704_00096444.jpg",
"desk_00002705_00096478.jpg",
"desk_00002706_00096511.jpg",
"desk_00002707_00096545.jpg",
"desk_00002708_00096578.jpg",
"desk_00002709_00096611.jpg",
"desk_00002710_00096644.jpg",
"desk_00002711_00096677.jpg",
"desk_00002712_00096711.jpg",
"desk_00002713_00096744.jpg",
"desk_00002714_00096779.jpg",
"desk_00002715_00096812.jpg"};

string aerial[]={"cimg_00002885_01522626.jpg",
"cimg_00002886_01522659.jpg",
"cimg_00002887_01522692.jpg",
"cimg_00002888_01522726.jpg",
"cimg_00002889_01522759.jpg",
"cimg_00002890_01522793.jpg",
"cimg_00002891_01522827.jpg",
"cimg_00002892_01522860.jpg",
"cimg_00002893_01522893.jpg",
"cimg_00002894_01522926.jpg",
"cimg_00002895_01522960.jpg",
"cimg_00002896_01522993.jpg",
"cimg_00002897_01523027.jpg",
"cimg_00002898_01523060.jpg",
"cimg_00002899_01523094.jpg",
"cimg_00002900_01523127.jpg",
"cimg_00002901_01523160.jpg",
"cimg_00002902_01523193.jpg",
"cimg_00002903_01523227.jpg",
"cimg_00002904_01523260.jpg",
"cimg_00002905_01523294.jpg",
"cimg_00002906_01523327.jpg",
"cimg_00002907_01523360.jpg",
"cimg_00002908_01523393.jpg",
"cimg_00002909_01523427.jpg",
"cimg_00002910_01523460.jpg",
"cimg_00002911_01523494.jpg",
"cimg_00002912_01523527.jpg",
"cimg_00002913_01523560.jpg",
"cimg_00002914_01523593.jpg",
"cimg_00002915_01523627.jpg",
"cimg_00002916_01523660.jpg",
"cimg_00002917_01523694.jpg",
"cimg_00002918_01523728.jpg",
"cimg_00002919_01523761.jpg",
"cimg_00002920_01523794.jpg",
"cimg_00002921_01523827.jpg",
"cimg_00002922_01523860.jpg",
"cimg_00002923_01523893.jpg",
"cimg_00002924_01523928.jpg",
"cimg_00002925_01523961.jpg",
"cimg_00002926_01523994.jpg",
"cimg_00002927_01524028.jpg",
"cimg_00002928_01524061.jpg",
"cimg_00002929_01524094.jpg",
"cimg_00002930_01524127.jpg",
"cimg_00002931_01524161.jpg",
"cimg_00002932_01524195.jpg",
"cimg_00002933_01524228.jpg",
"cimg_00002934_01524261.jpg",
"cimg_00002935_01524295.jpg",
"cimg_00002936_01524328.jpg",
"cimg_00002937_01524361.jpg",
"cimg_00002938_01524394.jpg",
"cimg_00002939_01524428.jpg",
"cimg_00002940_01524461.jpg",
"cimg_00002941_01524495.jpg",
"cimg_00002942_01524528.jpg",
"cimg_00002943_01524561.jpg",
"cimg_00002944_01524594.jpg",
"cimg_00002945_01524628.jpg",
"cimg_00002946_01524662.jpg",
"cimg_00002947_01524695.jpg",
"cimg_00002948_01524729.jpg",
"cimg_00002949_01524762.jpg",
"cimg_00002950_01524795.jpg",
"cimg_00002951_01524828.jpg",
"cimg_00002952_01524861.jpg",
"cimg_00002953_01524894.jpg",
"cimg_00002954_01524928.jpg",
"cimg_00002955_01524962.jpg",
"cimg_00002956_01524996.jpg",
"cimg_00002957_01525029.jpg",
"cimg_00002958_01525062.jpg",
"cimg_00002959_01525095.jpg",
"cimg_00002960_01525134.jpg",
"cimg_00002961_01525163.jpg",
"cimg_00002962_01525195.jpg",
"cimg_00002963_01525229.jpg",
"cimg_00002964_01525263.jpg",
"cimg_00002965_01525296.jpg",
"cimg_00002966_01525329.jpg",
"cimg_00002967_01525362.jpg",
"cimg_00002968_01525395.jpg",
"cimg_00002969_01525429.jpg",
"cimg_00002970_01525462.jpg",
"cimg_00002971_01525496.jpg",
"cimg_00002972_01525529.jpg",
"cimg_00002973_01525563.jpg",
"cimg_00002974_01525595.jpg",
"cimg_00002975_01525629.jpg",
"cimg_00002976_01525662.jpg",
"cimg_00002977_01525696.jpg",
"cimg_00002978_01525730.jpg",
"cimg_00002979_01525763.jpg",
"cimg_00002980_01525796.jpg",
"cimg_00002981_01525829.jpg",
"cimg_00002982_01525862.jpg",
"cimg_00002983_01525896.jpg",
"cimg_00002984_01525930.jpg",
"cimg_00002985_01525963.jpg",
"cimg_00002986_01525997.jpg",
"cimg_00002987_01526030.jpg",
"cimg_00002988_01526063.jpg",
"cimg_00002989_01526097.jpg",
"cimg_00002990_01526129.jpg",
"cimg_00002991_01526166.jpg",
"cimg_00002992_01526197.jpg",
"cimg_00002993_01526231.jpg",
"cimg_00002994_01526264.jpg",
"cimg_00002995_01526297.jpg",
"cimg_00002996_01526330.jpg",
"cimg_00002997_01526363.jpg",
"cimg_00002998_01526397.jpg",
"cimg_00002999_01526430.jpg",
"cimg_00003000_01526463.jpg",
"cimg_00003001_01526497.jpg",
"cimg_00003002_01526530.jpg",
"cimg_00003003_01526563.jpg",
"cimg_00003004_01526597.jpg",
"cimg_00003005_01526630.jpg",
"cimg_00003006_01526664.jpg",
"cimg_00003007_01526697.jpg",
"cimg_00003008_01526731.jpg",
"cimg_00003009_01526764.jpg",
"cimg_00003010_01526798.jpg",
"cimg_00003011_01526830.jpg",
"cimg_00003012_01526863.jpg",
"cimg_00003013_01526897.jpg",
"cimg_00003014_01526931.jpg",
"cimg_00003015_01526964.jpg",
"cimg_00003016_01526998.jpg",
"cimg_00003017_01527031.jpg",
"cimg_00003018_01527064.jpg",
"cimg_00003019_01527097.jpg",
"cimg_00003020_01527131.jpg",
"cimg_00003021_01527166.jpg",
"cimg_00003022_01527198.jpg",
"cimg_00003023_01527231.jpg",
"cimg_00003024_01527265.jpg",
"cimg_00003025_01527298.jpg",
"cimg_00003026_01527331.jpg",
"cimg_00003027_01527364.jpg",
"cimg_00003028_01527398.jpg",
"cimg_00003029_01527431.jpg",
"cimg_00003030_01527465.jpg",
"cimg_00003031_01527498.jpg",
"cimg_00003032_01527532.jpg",
"cimg_00003033_01527565.jpg",
"cimg_00003034_01527598.jpg",
"cimg_00003035_01527631.jpg",
"cimg_00003036_01527665.jpg",
"cimg_00003037_01527698.jpg",
"cimg_00003038_01527732.jpg",
"cimg_00003039_01527765.jpg",
"cimg_00003040_01527798.jpg",
"cimg_00003041_01527831.jpg",
"cimg_00003042_01527865.jpg",
"cimg_00003043_01527898.jpg",
"cimg_00003044_01527932.jpg",
"cimg_00003045_01527965.jpg",
"cimg_00003046_01527999.jpg",
"cimg_00003047_01528032.jpg",
"cimg_00003048_01528065.jpg",
"cimg_00003049_01528098.jpg",
"cimg_00003050_01528132.jpg",
"cimg_00003051_01528166.jpg",
"cimg_00003052_01528199.jpg",
"cimg_00003053_01528232.jpg",
"cimg_00003054_01528266.jpg",
"cimg_00003055_01528299.jpg",
"cimg_00003056_01528332.jpg",
"cimg_00003057_01528365.jpg",
"cimg_00003058_01528399.jpg",
"cimg_00003059_01528432.jpg",
"cimg_00003060_01528466.jpg",
"cimg_00003061_01528499.jpg",
"cimg_00003062_01528532.jpg",
"cimg_00003063_01528565.jpg",
"cimg_00003064_01528599.jpg",
"cimg_00003065_01528632.jpg",
"cimg_00003066_01528666.jpg",
"cimg_00003067_01528699.jpg",
"cimg_00003068_01528733.jpg",
"cimg_00003069_01528766.jpg",
"cimg_00003070_01528799.jpg",
"cimg_00003071_01528832.jpg",
"cimg_00003072_01528866.jpg",
"cimg_00003073_01528899.jpg",
"cimg_00003074_01528933.jpg",
"cimg_00003075_01528966.jpg",
"cimg_00003076_01529000.jpg",
"cimg_00003077_01529032.jpg",
"cimg_00003078_01529066.jpg",
"cimg_00003079_01529100.jpg",
"cimg_00003080_01529133.jpg",
"cimg_00003081_01529173.jpg",
"cimg_00003082_01529201.jpg",
"cimg_00003083_01529233.jpg",
"cimg_00003084_01529266.jpg",
"cimg_00003085_01529299.jpg",
"cimg_00003086_01529333.jpg",
"cimg_00003087_01529366.jpg",
"cimg_00003088_01529400.jpg",
"cimg_00003089_01529433.jpg",
"cimg_00003090_01529467.jpg",
"cimg_00003091_01529500.jpg",
"cimg_00003092_01529533.jpg",
"cimg_00003093_01529567.jpg",
"cimg_00003094_01529600.jpg",
"cimg_00003095_01529634.jpg",
"cimg_00003096_01529668.jpg",
"cimg_00003097_01529701.jpg",
"cimg_00003098_01529734.jpg",
"cimg_00003099_01529766.jpg",
"cimg_00003100_01529800.jpg",
"cimg_00003101_01529834.jpg",
"cimg_00003102_01529867.jpg",
"cimg_00003103_01529900.jpg",
"cimg_00003104_01529934.jpg",
"cimg_00003105_01529967.jpg",
"cimg_00003106_01530000.jpg",
"cimg_00003107_01530033.jpg",
"cimg_00003108_01530067.jpg",
"cimg_00003109_01530101.jpg",
"cimg_00003110_01530134.jpg",
"cimg_00003111_01530174.jpg",
"cimg_00003112_01530202.jpg",
"cimg_00003113_01530234.jpg",
"cimg_00003114_01530267.jpg",
"cimg_00003115_01530300.jpg",
"cimg_00003116_01530334.jpg",
"cimg_00003117_01530368.jpg",
"cimg_00003118_01530401.jpg",
"cimg_00003119_01530435.jpg",
"cimg_00003120_01530467.jpg",
"cimg_00003121_01530501.jpg",
"cimg_00003122_01530534.jpg",
"cimg_00003123_01530567.jpg",
"cimg_00003124_01530601.jpg",
"cimg_00003125_01530635.jpg",
"cimg_00003126_01530668.jpg",
"cimg_00003127_01530702.jpg",
"cimg_00003128_01530735.jpg",
"cimg_00003129_01530768.jpg",
"cimg_00003130_01530801.jpg",
"cimg_00003131_01530835.jpg",
"cimg_00003132_01530868.jpg",
"cimg_00003133_01530902.jpg",
"cimg_00003134_01530935.jpg",
"cimg_00003135_01530968.jpg",
"cimg_00003136_01531002.jpg",
"cimg_00003137_01531035.jpg",
"cimg_00003138_01531068.jpg",
"cimg_00003139_01531102.jpg",
"cimg_00003140_01531136.jpg",
"cimg_00003141_01531175.jpg",
"cimg_00003142_01531204.jpg",
"cimg_00003143_01531235.jpg",
"cimg_00003144_01531268.jpg",
"cimg_00003145_01531302.jpg",
"cimg_00003146_01531335.jpg",
"cimg_00003147_01531368.jpg",
"cimg_00003148_01531402.jpg",
"cimg_00003149_01531436.jpg",
"cimg_00003150_01531469.jpg",
"cimg_00003151_01531502.jpg",
"cimg_00003152_01531535.jpg",
"cimg_00003153_01531569.jpg",
"cimg_00003154_01531602.jpg",
"cimg_00003155_01531635.jpg",
"cimg_00003156_01531669.jpg",
"cimg_00003157_01531702.jpg",
"cimg_00003158_01531736.jpg",
"cimg_00003159_01531769.jpg",
"cimg_00003160_01531803.jpg",
"cimg_00003161_01531836.jpg",
"cimg_00003162_01531870.jpg",
"cimg_00003163_01531903.jpg",
"cimg_00003164_01531936.jpg",
"cimg_00003165_01531969.jpg",
"cimg_00003166_01532003.jpg",
"cimg_00003167_01532036.jpg",
"cimg_00003168_01532070.jpg",
"cimg_00003169_01532103.jpg",
"cimg_00003170_01532136.jpg",
"cimg_00003171_01532176.jpg",
"cimg_00003172_01532204.jpg",
"cimg_00003173_01532236.jpg",
"cimg_00003174_01532269.jpg",
"cimg_00003175_01532303.jpg",
"cimg_00003176_01532337.jpg",
"cimg_00003177_01532369.jpg",
"cimg_00003178_01532403.jpg",
"cimg_00003179_01532436.jpg",
"cimg_00003180_01532470.jpg",
"cimg_00003181_01532503.jpg",
"cimg_00003182_01532536.jpg",
"cimg_00003183_01532570.jpg",
"cimg_00003184_01532604.jpg",
"cimg_00003185_01532637.jpg",
"cimg_00003186_01532670.jpg",
"cimg_00003187_01532703.jpg",
"cimg_00003188_01532737.jpg",
"cimg_00003189_01532770.jpg",
"cimg_00003190_01532804.jpg",
"cimg_00003191_01532837.jpg",
"cimg_00003192_01532871.jpg",
"cimg_00003193_01532903.jpg",
"cimg_00003194_01532937.jpg",
"cimg_00003195_01532970.jpg",
"cimg_00003196_01533003.jpg",
"cimg_00003197_01533037.jpg",
"cimg_00003198_01533071.jpg",
"cimg_00003199_01533104.jpg",
"cimg_00003200_01533138.jpg",
"cimg_00003201_01533177.jpg",
"cimg_00003202_01533204.jpg",
"cimg_00003203_01533237.jpg",
"cimg_00003204_01533270.jpg",
"cimg_00003205_01533304.jpg",
"cimg_00003206_01533338.jpg",
"cimg_00003207_01533371.jpg",
"cimg_00003208_01533404.jpg",
"cimg_00003209_01533437.jpg",
"cimg_00003210_01533470.jpg",
"cimg_00003211_01533504.jpg",
"cimg_00003212_01533538.jpg",
"cimg_00003213_01533571.jpg",
"cimg_00003214_01533605.jpg",
"cimg_00003215_01533638.jpg",
"cimg_00003216_01533672.jpg",
"cimg_00003217_01533705.jpg",
"cimg_00003218_01533738.jpg",
"cimg_00003219_01533772.jpg",
"cimg_00003220_01533805.jpg",
"cimg_00003221_01533838.jpg",
"cimg_00003222_01533872.jpg",
"cimg_00003223_01533905.jpg",
"cimg_00003224_01533938.jpg",
"cimg_00003225_01533971.jpg",
"cimg_00003226_01534004.jpg",
"cimg_00003227_01534038.jpg",
"cimg_00003228_01534072.jpg",
"cimg_00003229_01534105.jpg",
"cimg_00003230_01534139.jpg",
"cimg_00003231_01534178.jpg",
"cimg_00003232_01534206.jpg",
"cimg_00003233_01534238.jpg",
"cimg_00003234_01534272.jpg",
"cimg_00003235_01534305.jpg",
"cimg_00003236_01534339.jpg",
"cimg_00003237_01534372.jpg",
"cimg_00003238_01534406.jpg",
"cimg_00003239_01534439.jpg",
"cimg_00003240_01534471.jpg",
"cimg_00003241_01534505.jpg",
"cimg_00003242_01534539.jpg",
"cimg_00003243_01534572.jpg",
"cimg_00003244_01534606.jpg",
"cimg_00003245_01534639.jpg",
"cimg_00003246_01534673.jpg",
"cimg_00003247_01534706.jpg",
"cimg_00003248_01534738.jpg",
"cimg_00003249_01534772.jpg",
"cimg_00003250_01534806.jpg",
"cimg_00003251_01534839.jpg",
"cimg_00003252_01534873.jpg",
"cimg_00003253_01534906.jpg",
"cimg_00003254_01534939.jpg",
"cimg_00003255_01534972.jpg",
"cimg_00003256_01535006.jpg",
"cimg_00003257_01535039.jpg",
"cimg_00003258_01535073.jpg",
"cimg_00003259_01535106.jpg",
"cimg_00003260_01535140.jpg",
"cimg_00003261_01535180.jpg",
"cimg_00003262_01535207.jpg",
"cimg_00003263_01535240.jpg",
"cimg_00003264_01535273.jpg",
"cimg_00003265_01535306.jpg",
"cimg_00003266_01535340.jpg",
"cimg_00003267_01535373.jpg",
"cimg_00003268_01535407.jpg",
"cimg_00003269_01535440.jpg",
"cimg_00003270_01535473.jpg",
"cimg_00003271_01535507.jpg",
"cimg_00003272_01535540.jpg",
"cimg_00003273_01535573.jpg",
"cimg_00003274_01535607.jpg",
"cimg_00003275_01535640.jpg",
"cimg_00003276_01535673.jpg",
"cimg_00003277_01535706.jpg",
"cimg_00003278_01535740.jpg",
"cimg_00003279_01535774.jpg",
"cimg_00003280_01535807.jpg",
"cimg_00003281_01535840.jpg",
"cimg_00003282_01535874.jpg",
"cimg_00003283_01535907.jpg",
"cimg_00003284_01535940.jpg",
"cimg_00003285_01535973.jpg",
"cimg_00003286_01536007.jpg",
"cimg_00003287_01536040.jpg",
"cimg_00003288_01536075.jpg",
"cimg_00003289_01536107.jpg",
"cimg_00003290_01536141.jpg",
"cimg_00003291_01536181.jpg",
"cimg_00003292_01536207.jpg",
"cimg_00003293_01536241.jpg",
"cimg_00003294_01536274.jpg",
"cimg_00003295_01536307.jpg",
"cimg_00003296_01536341.jpg",
"cimg_00003297_01536374.jpg",
"cimg_00003298_01536407.jpg",
"cimg_00003299_01536440.jpg",
"cimg_00003300_01536474.jpg",
"cimg_00003301_01536508.jpg",
"cimg_00003302_01536541.jpg",
"cimg_00003303_01536574.jpg",
"cimg_00003304_01536608.jpg",
"cimg_00003305_01536641.jpg",
"cimg_00003306_01536674.jpg",
"cimg_00003307_01536707.jpg",
"cimg_00003308_01536742.jpg",
"cimg_00003309_01536774.jpg",
"cimg_00003310_01536808.jpg",
"cimg_00003311_01536841.jpg",
"cimg_00003312_01536875.jpg",
"cimg_00003313_01536908.jpg",
"cimg_00003314_01536941.jpg",
"cimg_00003315_01536974.jpg",
"cimg_00003316_01537008.jpg",
"cimg_00003317_01537041.jpg",
"cimg_00003318_01537075.jpg",
"cimg_00003319_01537108.jpg",
"cimg_00003320_01537142.jpg",
"cimg_00003321_01537182.jpg",
"cimg_00003322_01537209.jpg",
"cimg_00003323_01537242.jpg",
"cimg_00003324_01537275.jpg",
"cimg_00003325_01537309.jpg"};

typedef struct {
    unsigned int time_msec;
    double acc[3], rate[3];
} IMU_DATA;

double* quat_to_Rmat(const double* q, double* R);
double* transpose_mat_3x3(const double* A, double *B);
double* mul_mat_3x3(const double* A, const double* B, const double* C, double *D);
void print_mat(const double* A, int m, int n, const char* str);
void print_vec(const double* v, int m, const char* str);

int playback(const char* fname,int choice, int t_offset, IplImage* gimgf)
{
	static bool b_open = false;
	static int count = 0;
//	cout <<"Reading file : "<<fname<<endl;
//	static string dir(fname);
//	cout <<"Printing dir : "<<dir<<endl;
//	static ifstream fin(fname);

	int time_msec = 0;
	string str, name;
	size_t p, q;
	Mat im;
	namedWindow("Original Video",CV_WINDOW_AUTOSIZE);

/* Open file only once
	if (!b_open) {
		if (fin.fail()) {
			cout << "Error in opening a file " << fname << endl;
			return false;
		}

		p = dir.rfind("/");
		if (p != string::npos) dir.erase(p+1, dir.size()-p-1);
		getline(fin, str);
		dir += str + '/';

		b_open = true;
	}*/
	// Read image and timestamp
	cout<<str<<endl;
	if(choice==1)
	{
		str=aerial[count];			
		im=imread(aerial[count],CV_LOAD_IMAGE_COLOR);
	}
	else if(choice==2)
	{
		str=desk[count];			
		im=imread(desk[count],CV_LOAD_IMAGE_COLOR);
	}
	else
	{
		cout <<"System about to crash!!";
		return -1;	
	}
	IplImage img0=(IplImage)im;
	IplImage* img=&img0;
	imshow("Original Video",im);
	//IplImage* img = cvLoadImage(str.c_str(),1);
	if (img == NULL) {
	cout << "Error in loading: " << str.c_str() << endl << endl;
	return -1;
	}
	if (img->width != gimgf->width || img->height != gimgf->height) {
		printf("Error: Wrong image size, %d x %d\n", img->width, img->height);
		return -1;
	}
	p = str.rfind("_");
	q = str.rfind(".");
	//cout<<"p : "<<p<<" q : "<<q<<endl;
	if (p == string::npos || q == string::npos) {
		cout << "Error in reading timestamp from image file name " << name << endl;
		return -1;
	}
	string s = str.substr(p+1, q-p-1);
	time_msec = atoi(s.c_str()) + t_offset;
	printf("%s, %d\n", s.c_str(), time_msec);
	count++;
	smooth_image_float(img, gimgf, 3);
	//cvReleaseImage(&img);
	//cout << "time_msec : "<<time_msec<<"";
	return time_msec;	
}

void smooth_image_float(const IplImage* img, IplImage* gimgf, int w)
{
	CvSize size = cvSize(img->width, img->height);
	IplImage* gimg = cvCreateImage(size, IPL_DEPTH_8U, 1);

	if (img->nChannels == 3) {
		cvCvtColor(img, gimg, CV_BGR2GRAY);
	}
	else if (img->nChannels == 1) {
		cvCopy(img, gimg);
	}

	int len = img->width * img->height;
	if (w > 0) {
		IplImage* temp = cvCreateImage(size, IPL_DEPTH_32F, 1);
		ippsConvert_8u32f((Ipp8u *)gimg->imageData, (Ipp32f *)temp->imageData, len);

		// Smoothing
		int s = ((w % 2) == 0) ? w + 1 : w;
		cvSmooth(temp, gimgf, CV_GAUSSIAN, s, s);
		cvReleaseImage(&temp);
	}
	else {
		ippsConvert_8u32f((Ipp8u *)gimg->imageData, (Ipp32f *)gimgf->imageData, len);
	}

	cvReleaseImage(&gimg);
}

bool compute_homography_IMU(int ptime, int ctime, const char* fname, const char* shape_fname, 
							const double* KK, const double* Ki, double H[9])
{
	static bool b_open = false;
	static int index = 0;
	static vector<IMU_DATA> vdata;
	
	ifstream fin(fname);
	ifstream fin_sh(shape_fname);

	// Open file only once
	if (!b_open) {
		if (fin_sh.fail()) {
			cout << "Error in opening IMU shape file " << shape_fname << endl;
			return false;
		}

		double bias_acc[3], bias_gyro[3];
		double Ca[3][3], Cw[3][3];

		for (int i=0; i < 3; i++) fin_sh >> bias_acc[i];
		for (int k=0; k < 3; k++)
			for (int i=0; i < 3; i++) fin_sh >> Ca[k][i];

		for (int i=0; i < 3; i++) fin_sh >> bias_gyro[i];
		for (int k=0; k < 3; k++)
			for (int i=0; i < 3; i++) fin_sh >> Cw[k][i];

		/*
		printf("bias_acc = %7.1f %7.1f %7.1f\n", bias_acc[0], bias_acc[1], bias_acc[2]);
		printf("Ca = %7.4f %7.4f %7.4f\n", Ca[0][0], Ca[0][1], Ca[0][2]);
		printf("     %7.4f %7.4f %7.4f\n", Ca[1][0], Ca[1][1], Ca[1][2]);
		printf("     %7.4f %7.4f %7.4f\n", Ca[2][0], Ca[2][1], Ca[2][2]);
		printf("bias_acc = %7.1f %7.1f %7.1f\n", bias_gyro[0], bias_gyro[1], bias_gyro[2]);
		printf("Ca = %7.4f %7.4f %7.4f\n", Cw[0][0], Cw[0][1], Cw[0][2]);
		printf("     %7.4f %7.4f %7.4f\n", Cw[1][0], Cw[1][1], Cw[1][2]);
		printf("     %7.4f %7.4f %7.4f\n", Cw[2][0], Cw[2][1], Cw[2][2]);
		*/

		if (fin.fail()) {
			cout << "Error in opening IMU file " << fname << endl;
			return false;
		}

		int t1, t2;
		double a[3], w[3];
		IMU_DATA m;
		while(!fin.eof()) {
			fin >> t1 >> t2 >> a[0] >> a[1] >> a[2] >> w[0] >> w[1] >> w[2];
			for (int i=0; i < 3; i++) a[i] = a[i] - bias_acc[i];
			for (int i=0; i < 3; i++) w[i] = w[i] - bias_gyro[i];

			m.time_msec = t1;
			m.acc[0]  = Ca[0][0]*a[0] + Ca[0][1]*a[1] + Ca[0][2]*a[2];
			m.acc[1]  = Ca[1][0]*a[0] + Ca[1][1]*a[1] + Ca[1][2]*a[2];
			m.acc[2]  = Ca[2][0]*a[0] + Ca[2][1]*a[1] + Ca[2][2]*a[2];
			m.rate[0] = Cw[0][0]*w[0] + Cw[0][1]*w[1] + Cw[0][2]*w[2];
			m.rate[1] = Cw[1][0]*w[0] + Cw[1][1]*w[1] + Cw[1][2]*w[2];
			m.rate[2] = Cw[2][0]*w[0] + Cw[2][1]*w[1] + Cw[2][2]*w[2];

			vdata.push_back(m);

			//printf("%6d %6.1f %6.1f %6.1f\n", t1, m.rate[0], m.rate[1], m.rate[2]);
		}

		printf("IMU: %d samples are loaded\n", (int)vdata.size());

		b_open = true;
	}

	double q[4] = {1, 0, 0, 0};
	int deltaT = 2;
	int tt, n = (int)vdata.size();

	if (index >= n-1) {
		H[0] = H[4] = H[8] = 1.0;
		H[1] = H[2] = H[3] = H[5] = H[6] = H[7] = 0.0;
		return false;
	}

	for (tt = ptime; tt < ctime; ) 
	{
		double a = 1.0;
		int ti = (int)vdata[index].time_msec;
		int tj = (int)vdata[index+1].time_msec;
		
		if (tt < ti) { 
			a = ((ti - tt) < 30) ? 1.0 : 0.0;
		}
		else if (tt >= ti && tt < tj) {
			a = (double)(tj - tt)/(double)(tj - ti);
		}
		else if (tt >= tj) {
			if (index++ > n-1) break;
			else continue;
		}
		else break;
		
		// first-order approximation
		double w[3];
		for(int i=0; i < 3;i++) w[i] = a*vdata[index].rate[i] + (1-a)*vdata[index+1].rate[i];
		//printf("INS: %d/%d %8d %6.2f %8.4f %8.4f %8.4f\n", index, vdata[index].time_msec, tt, 1-a, w[0], w[1], w[2]);

		// Quaternion integration: dq = (0.5*Qw*q)*dt;
		double Qw[4][4] = {{   0,   -w[0],  -w[1], -w[2]},
						   { w[0],     0,    w[2], -w[1]},
						   { w[1],  -w[2],     0,   w[0]},
						   { w[2],   w[1],  -w[0],    0 }};

		double dq[4];
		for (int i=0; i < 4; i++) {
			dq[i] = 0.5f*(Qw[i][0]*q[0] + Qw[i][1]*q[1] + Qw[i][2]*q[2] + Qw[i][3]*q[3])*(0.001*deltaT);
			q[i] += dq[i];
		}

		// Normalize the quaternion
		double norm = sqrt(q[0]*q[0] + q[1]*q[1] + q[2]*q[2] + q[3]*q[3]);
		for (int i=0; i < 4; i++) q[i] = q[i]/norm;

		tt += deltaT;
	}

	// H = KK*Ri*Ki
	double R[9], Ri[9];
	transpose_mat_3x3(quat_to_Rmat(q, R), Ri);
	mul_mat_3x3(KK, Ri, Ki, H);

	//printf("R_imu: %d --> %d\n", ptime, ctime);
	//print_mat(R, 3, 3, "R = ");
	//print_mat(H, 3, 3, "H = ");
	
	return true;
}

double* transpose_mat_3x3(const double* A, double *B)
{
	for (int i=0; i < 3; i++) 
		for (int k=0; k < 3; k++) 
			B[i + 3*k] = (i == k) ? A[i + 3*k] : A[k + 3*i];

	return B;
}

double* mul_mat_3x3(const double* A, const double* B, const double* C, double *D)
{
	double AB[9];

	for (int i=0; i < 3; i++) 
		for (int k=0; k < 3; k++)
			AB[i + 3*k] = A[i]*B[3*k] + A[i+3]*B[3*k+1] + A[i+6]*B[3*k+2];

	for (int i=0; i < 3; i++) 
		for (int k=0; k < 3; k++)
			D[i + 3*k] = AB[i]*C[3*k] + AB[i+3]*C[3*k+1] + AB[i+6]*C[3*k+2];

	return D; // D = A*B*C
}

void print_mat(const double* A, int m, int n, const char* str)
{
	if (str != NULL) printf("%s [ ... \n", str);
	for (int i=0; i < m; i++) {
		for (int k=0; k < n; k++) printf("%14.10f ", A[i + m*k]); 
		if (i == m-1) printf("];\n\n");
		else		  printf(";\n");
	}
}

void print_vec(const double* v, int m, const char* str)
{
	if (str != NULL) printf("%s [ ... \n", str);
	for (int i=0; i < m; i++) {
		printf("%11.7f ", v[i]);
		if ((i % 10) == 9) printf(" ...\n");
		if (i == m-1) printf("];\n\n");
	}
}

double* quat_to_Rmat(const double* q, double* R)
{
	double w = q[0];
	double x = q[1];
	double y = q[2];
	double z = q[3];
	double n = sqrt(w*w + x*x + y*y + z*z);
	
	w = w/n;
	x = x/n;
	y = y/n;
	z = z/n;

	double xx = x*x, xy = x*y, xz = x*z, xw = x*w;
	double yy = y*y, yz = y*z, yw = y*w;
	double zz = z*z, zw = z*w;
	double ww = w*w;

	R[0] = 1 - 2*(yy + zz); R[3] =     2*(xy - zw); R[6] =     2*(xz + yw);
	R[1] =     2*(xy + zw);	R[4] = 1 - 2*(xx + zz);	R[7] =     2*(yz - xw);
	R[2] =     2*(xz - yw);	R[5] =     2*(yz + xw);	R[8] = 1 - 2*(xx + yy);

	return R;
}
